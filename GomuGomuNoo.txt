setclipboard("Join us in our discord server to be notified.")
toclipboard("Join us in our discord server to be notified.")


wait(0.5)

setclipboard("https://discord.com/invite/xUqmQYv5Hp")
toclipboard("https://discord.com/invite/xUqmQYv5Hp")

wait(0.5)
-- Create ScreenGui
local function createGUI()
    local player = game.Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "KeywordGUI"
    screenGui.ResetOnSpawn = false  -- Ensure the GUI does not reset on respawn
    screenGui.Parent = playerGui

    -- Add UIScale for better mobile scaling
    local uiScale = Instance.new("UIScale")
    uiScale.Parent = screenGui

    -- Create a draggable frame
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.4, 0, 0.4, 0)
    frame.Position = UDim2.new(0.3, 0, 0.3, 0)
    frame.BackgroundColor3 = Color3.new(0, 0, 0)
    frame.BackgroundTransparency = 0.5
    frame.Active = true
    frame.Draggable = true
    frame.Parent = screenGui

    -- Create Start Button
    local startButton = Instance.new("TextButton")
    startButton.Size = UDim2.new(0.8, 0, 0.2, 0)
    startButton.Position = UDim2.new(0.1, 0, 0.1, 0)
    startButton.BackgroundColor3 = Color3.new(0, 1, 0)
    startButton.Text = "Start"
    startButton.TextColor3 = Color3.new(0, 0, 0)
    startButton.Parent = frame

    -- Create Green Light/Red Light Button
    local lightButton = Instance.new("TextButton")
    lightButton.Size = UDim2.new(0.8, 0, 0.2, 0)
    lightButton.Position = UDim2.new(0.1, 0, 0.55, 0)
    lightButton.BackgroundColor3 = Color3.new(1, 0, 0)
    lightButton.Text = "Red Light ðŸš«"
    lightButton.TextColor3 = Color3.new(0, 0, 0)
    lightButton.Parent = frame

    -- Setup services
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local CustomiseBooth = ReplicatedStorage:WaitForChild("CustomiseBooth")

    -- Function to update booth text
    local function updateBoothText(text)
        CustomiseBooth:FireServer("Update", { ["DescriptionText"] = text })
    end

    local isRedLight = false
    local playerPositions = {}
    local blacklistedPlayers = {} -- Keep track of players blacklisted due to movement

    -- Function to track player movement
    local function trackPlayerMovement()
        if not isRedLight then return end
        
        for _, player in ipairs(Players:GetPlayers()) do
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local position = player.Character.HumanoidRootPart.Position
                if playerPositions[player.Name] then
                    -- Check if the player's position has changed since last update
                    if position ~= playerPositions[player.Name] then
                        -- Player moved during red light, blacklist them
                        if not blacklistedPlayers[player.Name] then
                            print("Blacklisting player: " .. player.Name)
                            CustomiseBooth:FireServer("AddBlacklist", player.Name)
                            blacklistedPlayers[player.Name] = true
                        end
                    end
                end
                -- Update player's position
                playerPositions[player.Name] = position
            end
        end
    end

    -- Light Button functionality
    lightButton.MouseButton1Click:Connect(function()
        if lightButton.Text == "Red Light ðŸš«" then
            -- Set to Green Light
            isRedLight = false
            playerPositions = {}
            -- Unblacklist everyone
            for playerName, _ in pairs(blacklistedPlayers) do
                print("Unblacklisting player: " .. playerName)
                CustomiseBooth:FireServer("RemoveBlacklist", playerName)
                blacklistedPlayers[playerName] = nil
            end
            -- Change to Green Light
            lightButton.Text = "Green Light âœ…"
            lightButton.BackgroundColor3 = Color3.new(0, 1, 0)
            updateBoothText("Green Light âœ…")
        else
            -- Set to Red Light
            isRedLight = true
            -- Change to Red Light
            lightButton.Text = "Red Light ðŸš«"
            lightButton.BackgroundColor3 = Color3.new(1, 0, 0)
            updateBoothText("Red Light ðŸš«")
        end
    end)

    -- Start button functionality
    startButton.MouseButton1Click:Connect(function()
        local textBox = frame:FindFirstChild("TextBox") -- Assuming there's a TextBox within the frame
        if not textBox then return end
        
        local inputText = textBox.Text
        local salita = {}

        for i = 1, #inputText do
            table.insert(salita, inputText:sub(1, i))
        end

        for _, text in ipairs(salita) do
            local args = {
                [1] = "Update",
                [2] = {
                    ["DescriptionText"] = text
                }
            }

            CustomiseBooth:FireServer(unpack(args))
            wait(0.1)
        end
    end)

    -- Connect tracking function to RunService
    RunService.Heartbeat:Connect(trackPlayerMovement)
end

-- Ensure GUI is created when the player joins
local player = game.Players.LocalPlayer
if not player:WaitForChild("PlayerGui"):FindFirstChild("KeywordGUI") then
    createGUI()
end
